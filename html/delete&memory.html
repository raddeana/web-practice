<!DOCTYPE html>
<html>
    <head>
        <title>chrome浏览器，delete操作和内存的关系</title>
        <link rel="stylesheet" type="text/css" href="/css/normalize.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/css/common.css" media="screen">
    </head>
    <body>
        <p>测试结果是：大多数实验中内存正常释放，少部分情况内存未释放</p>
        <button id="cleaner">
            清除数据
        </button>
        <script type="text/javascript">
            class TD {
                a = 1;
                b;
            }

            let tds = [];

            for (let i = 0; i < 10000000; i ++) {
                const td = new TD;
                // 内存正常释放
                // 占用内存45M
                // delete td.a;

                // 内存正常释放
                // 占用内存9M
                // td.a = undefined;
                // td.a = null;

                // 占内存9M
                tds.push(td);
            }

            document.getElementById('cleaner').onclick = function () {
                alert(tds.length);
                tds = null;
            };
        </script>
    </body>
</html>